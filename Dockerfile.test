# Dockerfile for Integration Testing
# Runs the API server for integration tests

FROM node:20-alpine

WORKDIR /app

# Install build dependencies
RUN apk add --no-cache python3 make g++ wget

# Copy package files
COPY package*.json ./

# Install all dependencies
RUN npm ci

# Copy server source
COPY server ./server
COPY tsconfig.json ./

# Expose API port
EXPOSE 3001

# Start the server
CMD ["npx", "tsx", "server/index.ts"]
